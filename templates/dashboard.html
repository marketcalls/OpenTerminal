{% extends 'layout.html' %}
{% block content %}
<div class="flex">
    <!-- Left Panel -->
    <div class="w-1/4 bg-gray-800 p-4">
        <!-- NIFTY and SENSEX indices -->
        <div id="indices" class="mb-4">
            <h2 class="text-xl font-bold">Indices</h2>
            <div id="index-list">
                <div class="flex justify-between">
                    <span>NIFTY 50</span>
                    <span id="nifty-value">Loading...</span>
                </div>
                <div class="flex justify-between">
                    <span>SENSEX</span>
                    <span id="sensex-value">Loading...</span>
                </div>
            </div>
        </div>

        <!-- Watchlists -->
        <div id="watchlists">
            <h2 class="text-xl font-bold mb-2">Watchlists</h2>
            <button id="create-watchlist-btn" class="btn btn-primary btn-sm mb-4">Add Watchlist</button>
            
            <!-- Tabs for watchlists -->
            <div class="tabs tabs-boxed mb-4">
                {% for watchlist in watchlists %}
                <button class="tab tab-btn {% if loop.first %}tab-active{% endif %}" data-watchlist-id="{{ watchlist.id }}">{{ watchlist.name }}</button>
                {% endfor %}
            </div>

            <!-- Single search box for active watchlist -->
            <input type="text" id="search-symbol-input" class="search-symbol-input mb-2 w-full input input-bordered" placeholder="Search symbol...">
            <ul id="search-results" class="mb-4"></ul>

            <!-- Watchlist content -->
            {% for watchlist in watchlists %}
            <div id="watchlist-{{ watchlist.id }}" class="watchlist-content {% if not loop.first %}hidden{% endif %}">
                <ul class="pl-4">
                    {% if watchlist.items is iterable and watchlist.items|length > 0 %}
                        {% for item in watchlist.items %}
                        <li class="flex justify-between items-center mb-2">
                            <span>{{ item.symbol }}</span>
                            <button class="btn btn-xs btn-error remove-item-btn" data-item-id="{{ item.id }}">Remove</button>
                        </li>
                        {% endfor %}
                    {% else %}
                        <li>No items in this watchlist.</li>
                    {% endif %}
                </ul>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Right Panel -->
    <div class="w-3/4 bg-gray-700 p-4">
        <h2 class="text-xl font-bold">Right Panel Placeholder</h2>
        <!-- Empty placeholder -->
    </div>
</div>

<script src="{{ url_for('static', filename='dashboard.js') }}"></script>
{% endblock %}
